## 모든 주석과 보고서, 과정은 한글로 설명하고 한글로 처리한다.
## streamlit 에서 csv 데이터들도 각 길드별 길드원들의 격전지 점수와 1초당 점수, 추가 점수, 최대 획득 점수를 보여주는 에이전트다.

점수 계산 조건:
- data 디렉토리 아래의 데이터들을 이용한다.
- data 하위 디렉토리명이 길드명이고, 길드명 디렉토리 아래는 날짜이며, 날짜 디렉토리 아래에는 날짜별 데이터를 가지고 있다.
- 길드명 디렉토리 아래에 common.csv 파일은 모든 날짜에 동일하게 적용된다.
- boss.csv는 보스 공격 점수에 대한 데이터이고, normal은 일반 몬스터 공격 점수이다.
- normal data는 battle_score(격전지 점수) 계산과 전체 획득 점수 및 남은 획득 가능 점수를 계산할 때만 사용된다.
- 1초당 점수 = 1000점 + 격전지 점수*10로 계산된다.
- 최대 획득 점수 = 1초당 점수*(1200초+추가획득초) + 추가점수*10이고, 추가획득초는 0,20,60,120 중 하나이다.
- 격전지 점수 = (보스 또는 일반몬스터의 공격 점수 - 추가 점수)/1초당 점수이다.
- 격전지 점수의 최대는 250, 최소는 6이며 0.5 단위를 가진다.
- 추가 점수는 0, 500, 1000, 1500, 2500, 3000 값을 가진다.
- 추가 초는 0, 20, 60, 120 값을 가진다.
- 추가 점수를 모를 경우 두개의 공격 점수의 차를 구하고(두 값의 차가 적을 수록 좋다.) 구한 값%1초당 점수 == 0 인 값 중 5의 배수인 값을 찾아 추정한다.
- 위 식을 만족하는 격전지 점수 값과 추가 점수 값은 여러개가 나타날 수 있기 때문에, 그럴경우 common에 같은 닉네임(날짜는 일치하지 않아도 된다.)의 격전지 점수와 추가 점수 데이터가 있다면 common의 데이터와 가장 근접한 2개의 데이터만 추출해서 표시하고, common에 없다면 모두 표시한다.
- 격전지 점수를 추정할 떄, 데이터들(보스 공격 점수 또는 일반 몬스터 공격 점수) 중 0초만 공격하여 추가 점수만 획득한 것을 제외하고 5의 배수인 것 중 가장 적은 점수를 가지고 추정해야한다.
- common.csv 로 되어 있는 데이터는 길드원별 확정된 추가점수와 추가초, 격전지점수를 담고 있다
- common에 같은 날짜에 해당되는 데이터가 있다면, 같은 날짜의 격전지 점수, 추가 점수, 추가 초는 common의 값을 우선 사용한다.
- 최대획득점수 및 1초당 점수 또한 common에 같은 날짜의 데이터가 있다면 이 확정 데이터로 계산하며, 추정 격전지 값을 사용하지 않는다.


목표:
- streamlit에서 git repository와 연결한 뒤 구해진 값들을 테이블로 볼 수 있도록 대쉬보드를 작성한다.
- 닉네임별 공격 횟수, 총 공격 점수, 평균 점수, 격전지 점수, 추가 점수, 1초당 점수, 추가 초, 최대획득점수를 닉네임별 점수표로 나타내며, common에 일치하는 날짜의 데이터가 없어 확정 점수가 없을 경우, 다른 날짜의 데이터를 참고하여, 추정 값 중 근접 값 2개를 추출해서 별도 필드로 표시한다.
- 닉네임별 점수 추정 결과 테이블에서 필드 순서는 닉네임, 공격횟수, 총점, 평균점수, 확정 격전지점수, 확정 추가점수, 확정 1초당 점수, 확정 추가 초, 최대획득점수, 추정 격전지/추가점수 순서로 표기한다.
- 총점이 높은 순서로 정렬한다.
- 최대획득점수는 추가초를 모를경우 0초로 계산 하되, 이때의 최대획득점수가 총점 보다 낮다면 추가초를 높은 점수로 올려서 계산한다.(ex. 추가초 0초로 계산한 최대획득점수가 총점 보다 낮다면 다음 추가 초인 20초로 계산하며 추가초 필드에 20이라 표기한다.)
- 확정 점수가 없을 경우에만 최대획득점수에 추정 격전지/추가점수 데이터를 사용하여 추가한다.
- 공격 횟수는 보스 공격 횟수, 일반 몬스터 공격 횟수의 합이다.
- 총 공격 점수는 보스 공격 점수, 일반 몬스터 고격 점수의 합이다.

- 해당 길드 전체 길드원의 총점과 최대획득점수 남은획득점수(최대획득점수-총점) 또한 닉네임별 점수표 아래에 길드합계로 표시한다.
- 확정 격전지 점수가 없고 추정도 불가한 사람의 것은 제외하고 추정불가인 사람들의 총점을 별도로 표시해서 보여준다.

- 길드합계 아래에, 각 닉네임별 격전지 점수, pps, 남은 공격횟수, 남은 시간, 남은 획득 점수를 표로 보여준다.
- 확정 점수가 없고 추정 점수들만 있을 경우 추정 점수들을 모두 계산해서 보여주며, 추정 불가인 경우 비워둔다.
- 남은 획득 점수 = 최대획득점수 - 닉네임별 총점
- 남은 시간 = (남은 획득 점수 - 남은 공격횟수 * 추가 점수) / pps

- 필터는 길드, 날짜(복수 선택 불가)를 선택할 수 있게하고, 길드는 PPP-M, 최근 날짜를 기본으로 한다. (나머지 제거)
- 날짜의 경우 전체 선택을 추가하여 날짜를 전체 선택으로 할 경우 단일 날짜 페이지와는 다르게 닉네임별 결과가 아닌 각 날짜별 격전지 점수를 비교하여 볼 수 있도록 한다.
- 시각화 그래프들과 격전지 점수, 추가 점수, 추가 초를 입력 받아 1초당 점수 및 최대 획득 점수 계산하는 계산기를 다른탭에 작성한다.
- 원본데이터는 가장 마지막 탭으로 분리하며, 보스 데이터의 경우 보스별로 테이블을 모두 분리해서 보여주고, 일반 몬스터 데이터일 경우도 별로 테이블로 보여준다.

"""
20260117

균격 미참여
1. X
2. X
3. 뮤기, 안녕
4. X
5. X
6. 강철, 뮤기, 당직, 안녕
7. 546, 안녕, 당직, 모리, 설풍

1회 미참 : 546, 설풍, 모리, 강철
2회 미참 : 뮤기, 당직
3회 미참 : 안녕
"""
과 비슷한 형식으로 각 보스별 미참여자의 리스트와 닉네임별 미참여 횟수를 정리해서 보여주는 탭을 시각화 탭 아래에 만들어주고, 시각화 탭을 적절한 이름으로 변견한다.

날짜 전체 선택을 할 경우 원하는 날짜들을 선택할 수 있도록 해주고, 선택한 날짜들에 해당되는 데이터로 위의 조건들에 따라 만들어준다.
날짜 전체 선택의 시각화 탭에서는 선택한 날짜들의 합산된 닉네임별 미참여 횟수를 보여준다.




예시:
1. 뺌삐삐가 보스 공격으로 한 데이터 중 하나인 500점은 1초당 점수의 최솟값 보다 적기 때문에 0초로 볼 수 있고, 추가 점수는 500점으로 추정할 수 있다.
2. A가 1번 보스에서 217400점을 얻고, 2번 보스에서 265600점을 얻었다면 A는 1초에 2410점을 치는 사람이고, 격전지 점수는 141이며, 추가 점수는 500점인 것을 유추할 수 있다.
3. 추가 획득 초가 20초인 사람의 최대 획득 점수는 1초당 점수*1220초로 계산한다.

